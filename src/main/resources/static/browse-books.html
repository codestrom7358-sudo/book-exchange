<!DOCTYPE html>
<html>
<head>
    <title>Browse Books</title>
    <style>
        body {
            font-family: Arial;
            padding: 20px;
            background: #f4f6ff;
        }

        h2 {
            text-align: center;
        }

        .search-box {
            text-align: center;
            margin-bottom: 20px;
        }

        input[type="text"] {
            width: 60%;
            padding: 10px;
            font-size: 16px;
        }

        .book {
            background: white;
            padding: 15px;
            margin: 10px auto;
            border-radius: 10px;
            width: 60%;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .book-title {
            font-size: 20px;
            font-weight: bold;
        }

        .category {
            color: gray;
            font-size: 14px;
        }

    </style>
</head>
<body>

<h2>Available Books</h2>

<div class="search-box">
    <input type="text" id="search" placeholder="Search by book name or category..." onkeyup="searchBooks()">
</div>

<div id="book-list"></div>

<script>
    let allBooks = [];

    fetch("http://localhost:8080/books/all")
        .then(response => response.json())
        .then(data => {
            allBooks = data;
            displayBooks(allBooks);
        })
        .catch(error => console.error("Error fetching books:", error));

    function displayBooks(books) {
        let container = document.getElementById("book-list");
        container.innerHTML = "";

        if (books.length === 0) {
            container.innerHTML = "<p style='text-align:center;'>No books found.</p>";
            return;
        }

        books.forEach(book => {
            let box = `
                <div class="book">
                    <div class="book-title">${book.bookName}</div>
                    <div class="category">Category: ${book.category || 'N/A'}</div>
                    <p>${book.description}</p>
                    <p><strong>Semester:</strong> ${book.semester}</p>
                    <p><strong>Contact:</strong> ${book.giverMobile}</p>
                </div>
            `;
            container.innerHTML += box;
        });
    }

    function searchBooks() {
        let text = document.getElementById("search").value.toLowerCase();

        let filtered = allBooks.filter(book =>
            book.bookName.toLowerCase().includes(text) ||
            book.category.toLowerCase().includes(text)
        );

        displayBooks(filtered);
    }
</script>

</body>
</html>
